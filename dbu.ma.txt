@#/_/klong chen 'od gsal snying thig/ dbu ma/ Формальна теорема пустотності всіх феноменів

module dbu.ma where
import path

Сьогодні ми будемо формалізувати поняття недвоїстості в буддизмі,
яке пов'язане одразу з багатьма концепціями на рівнях Сутри, Тантри
та Дзогчена: поняттям взаємозалежного виникнення та поняттям порожнечі
всіх феноменів (Сутра Праджняпараміти). Класичний приклад із
розчленовуванням тіла ставить питання, коли тіло перестає бути
людиною-істотою, якщо від нього почати відрубувати шматки м'яса або іншими
словами, щоб відрізнити тіло від не-тіла, нам потрібен двомісний
предикат (родина типів), функція, яка може ідентифікувати конректні
два еклемпляри тіла. Практично йдеться про ідентифікацію двох об'єктів,
тобто про звичайний тип-рівність (можливо навіть гомотопічний) Мартіна-Льофа.

def trans′ (A B : U) (p : PathP (<_> U) A B) : A → B := transp p 0
def coe′ (A B : U) (p : PathP (<_> U) A B) : A → B := λ (x : A), trans′ A B p x
def cong′ (A : U) (f : A → U) (a b : A) (p : PathP (<_> A) a b)
  : PathP (<_> U) (f a) (f b) := <i> f (p @ i)

За фреймворк візьмемо концепти Готтлоба Фреге, згідно з визначенням,
концепт - це предикат над об'єктом або, іншими словами, Пі-тип Мартіна-Льофа,
індексований тип, сім'я типів, тривіальне розшарування тощо. Де об'єкт x з o
належить концепту, якщо сам концепт, параметризований цим об'єктом,
населений p(o) : U (де p : concept o).

def concept (o : U) := o → U

Концепт p повинен надавати приклад чи контрприклад розрізнення,
тобто щоб визначити тіло це чи не тіло ще, поки ми його розчленовуємо,
нам потрібно як мінімум два шматки: тіло і не тіло як приклади ідентифікації.
Таким чином, недвоїстість може бути представлена як рівність між усіма
розшаруваннями (предекатами над об'єктами).

def nondual (o : U) (p : concept o) : U₁ := Π (x y : o), PathP (<_> U) (p x) (p y)

Отже, недвоїстість усуває різницю між прикладами і контрприкладами
на примордіальному рівні мандали MLTT, тобто ідентифікує всі концепти.
Сама ж ідентифікація класів об'єктів, які належать різним концептам --- це умова,
що стискає всі об'єкти в точку, або стягуваний простір, вершина конуса
мандали MLTT, або, іншими словами, порожнеча всіх феноменів виражена
як тип логічної одиниці, який містить лише один елемент.

def allpaths (o : U) : U := Π (x y : o), PathP (<_> o) x y

Формулювання буддійської теореми недвоїстості, яка поширюється
всі типи учнів (тупих, середніх і тямущих), може звучати так:
недвоїстість концепту є спосіб ідентифікації його об'єктів. Сформулюємо
цю саму теорему в інший бік: спосіб ідентифікації об'єктів задає
предикат неподвоїстості концептів. Туди - ((p: concept o) -> nondual o p) -> allpaths o,
Сюди - allpaths o -> ((p: concept o) -> nondual o p). І доведемо її!
Як видно з сигнатур нам лише треба побудувати функцію транспорту між
двома просторами шляхів: (p x) =U (p y) і x =o y. Скористаємося
приведенням шляху до стрілки (coerce) та конгруентності (cong) з
базової бібліотеки.

def encode (o : U) : (Π (p : concept o), nondual o p) → all-phenomenas o
 := λ (nd: Π (p : concept o), nondual o p) (a b : o),
      coe′ (PathP (<_> o) a a) (PathP (<_> o) a b) (nd (λ (z : o), PathP (<_> o) a z) a b) (<_> a)

def decode (o : U) : all-phenomenas o → (Π (p : concept o), nondual o p)
 := λ (all : all-phenomenas o) (p : concept o) (x y : o), cong′ o p x y (all x y)

